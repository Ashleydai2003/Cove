// /Backend/prisma/schema.prisma
// This file contains the Prisma schema, learn more about it in the docs: https://pris.ly/d/prisma-schema

// Configure the Prisma Client generator
generator client {
  provider = "prisma-client-js"
  // Generate TypeScript types
  previewFeatures = []
  output = "../node_modules/.prisma/client"
  binaryTargets = ["native", "rhel-openssl-1.0.x"]
}

// Configure the database connection
datasource db {
  provider = "postgresql"
  // The connection URL will be provided via environment variable
  url = env("DATABASE_URL")
}

// User model with Firebase authentication
model User {
  id              String      @id // Using Firebase UID as ID
  name            String?
  phone           String      @unique
  age             Int?
  birthday        DateTime? 
  interests       String[]
  latitude        Float?
  longitude       Float?
  almaMater       String?
  job             String?
  workLocation    String?
  relationStatus  String?
  sexuality       String?
  onboarding      Boolean     @default(true)
  createdAt       DateTime    @default(now())
  updatedAt       DateTime    @updatedAt
  profilePhotoID  String?     @unique
  profilePhoto    UserImage?  @relation("ProfilePhoto", fields: [profilePhotoID], references: [id])
  photos          UserImage[] @relation("UserPhotos")
} 

// User Image model 
// Document how to use the @relation somewhere 
model UserImage {
  id            String    @id @default(cuid())
  user          User      @relation("UserPhotos", fields: [userId], references: [id])
  userId        String
  createdAt     DateTime  @default(now())
  profileUser   User?     @relation("ProfilePhoto")
}

// In the future:
// events: id,	host_id, name, etc 
// eventPhotos: id, eventID, 